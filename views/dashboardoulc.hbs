<!DOCTYPE html>

<html>
    <head>
        <title>Add User</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/css/dashboardstyle.css">
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        
    </head>
    <body>
        <div id="header">Dashboard</div>
        <ul class="nav-tabs" id="myTab" role="tablist">
            <button class="nav-item" id="all-tab" data-toggle="tab" href="#all" role="tab"
                aria-controls="all" value="" onclick="viewAll()">
                Day
            </button>
            <button class="nav-item selected" id="activeusers-tab" data-toggle="tab" href="#activeusers" role="tab"
                aria-controls="activeusers" value="true" onclick="viewActive()">
                Week
            </button>
            <button class="nav-item" id="inactiveusers-tab" data-toggle="tab" href="#inactiveusers" role="tab"
                aria-controls="inactiveusers" value="false" onclick="viewInactive()">
                Month
            </button>
            <button class="nav-item" id="inactiveusers-tab" data-toggle="tab" href="#inactiveusers" role="tab"
                aria-controls="inactiveusers" value="false" onclick="viewInactive()">
                Year
            </button>
        </ul>
        <div class = "container">
            <div class= "card-row row">
                <div class="indiv-cards col">
                    <div class = "dashboard-item">Pending Documents</div>
                    <div class = "sub-dashboard-header">{{pending.today}} today</div>
                    <div class = "dashboard-item-body">{{pending.all}}</div>
                    <div class = "dashboard-item-sub-body">Documents</div>
                </div>
                <div class="indiv-cards col">
                    <div class = "dashboard-item">Cleared Documents</div>
                    <div class = "sub-dashboard-header"><br></div>
                    <div class = "dashboard-item-body">{{cleared.percentage}}%</div>
                    <div class = "dashboard-item-sub-body">{{cleared.count}}/{{requestCount}} Documents Cleared</div>
                </div>
                <div class="indiv-cards col">
                    <div class = "dashboard-item">Status of Contracts</div>
                    <div id = "piechart" class = "chart"></div>
                </div>
            </div>
            <div class= "card-row row">
                <div class="indiv-cards col">
                    <div class = "dashboard-item">Waiting Documents</div>
                    <div class = "sub-dashboard-header">{{waiting.today}} today</div>
                    <div class = "dashboard-item-body">{{waiting.all}}</div>
                    <div class = "dashboard-item-sub-body">Documents</div>
                </div>
                <div class="indiv-cards col">
                    <div class = "dashboard-item">To Review</div>
                    <div class = "sub-dashboard-header">{{toreview.today}} today</div>
                    <div class = "dashboard-item-body">{{toreview.all}}</div>
                    <div class = "dashboard-item-sub-body">Documents</div>
                </div>
                <div class="indiv-cards col">
                    <div class = "dashboard-item">Contract Request Per Type</div>
                    <div id = "columnchart" class = "chart"></div>
                </div>
            </div>
        </div>

        <div class="row row-cols-1 row-cols-md-3">
            <div class="col mb-4">
                <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Violation Per Department</h5>
                    <p class="" style="font-size: 10px;"> 
                        {{#each departments}}
                        {{abbrev}} = {{violationCount}} <br><br>
                        {{/each}}
                    </p>
                </div>
                </div>
            </div>
            <div class="col mb-4">
                <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Violation Per Type</h5>
                    <p class="" style="font-size: 10px;"> 
                        {{#each contractTypes}}
                        {{name}} = {{violationCount}} <br><br>
                        {{/each}}
                    </p>
                </div>
                </div>
            </div>
            <div class="col mb-4">
                <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Contract Request Per Type</h5>
                    <p class="" style="font-size: 10px;"> 
                        {{#each contractTypes}}
                        {{name}} = {{requestCount}} <br><br>
                        {{/each}}
                    </p>
                </div>
                </div>
            </div>
        </div>
    </body>
</html>

<script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.load('current', {'packages':['bar']});
    google.charts.setOnLoadCallback(drawChart);
    

    function drawChart() {

    var data = google.visualization.arrayToDataTable([
        ['Status', 'Requests'],
        ['Pending',     {{pending.all}}],
        ['Initial Review',      {{initialReview.count}}],
        ['Legal Review',  {{legalReview.count}}],
        ['Cleared', {{cleared.count}}],
    ]);

    var options = {
        chartArea: {
        height: '70%',
        width: '70%'
        },
        legend: 'labeled',
        pieSliceText: 'none',
        colors: ['#6DB388', '#00713D', '#0C8039', '#6AB085', '#6DA58B'],
        backgroundColor: { fill:'transparent' }
    };

    var chart = new google.visualization.PieChart(document.getElementById('piechart'));

    chart.draw(data, options);

    var data2 = google.visualization.arrayToDataTable([
        ['MOA/TOR', 'Count', { role: 'style' }],
        ['OJT', 2, '#00713D'],            // RGB value
        ['Silver', 19, '#00713D'],            // English color name
        ['Gold', 4, '#00713D'],
        ['Gold', 2, '#00713D'],
    ]);
    var options2 = {
          width: 200,
          legend: { position: 'none' },
          backgroundColor: { fill:'transparent' }
        };

    var columnchart = new google.charts.Bar(document.getElementById('columnchart'));
    columnchart.draw(data2, options2);

    }
    
    </script>