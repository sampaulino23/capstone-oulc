<div id = "feedback-history">
    {{!--<div class = "feedback-header">
        Feedback History:
    </div>
    <br>
    {{#each feedback}}
    <div id = "feedbackContainer" class = "feedback-container">
        
        <div id ="feedback-details-div">
            <div class = "profile-pic">
                <div id = "pic-inner{{@index}}" class = "pic-inner"></div>
            </div>
            <div id = "author-date-div">
                <div class = "feedback-author" id = "feedback-author{{@index}}">
                    {{user_id.fullName}}
                </div>
                <div class = "feedback-date">
                    {{formatfeedbackdate date}}
                </div>
            </div>
        </div>
        <div id = "feedbackDiv" class = "content">
            <span>{{content}}</span>
        </div>
    </div>
    {{/each}}--}}
    {{#compare user_role '!=' 'Requester'}}
    <div class="container comments-container">
        {{#each latestversioncontracts}}
        <div class="pending-feedback" id="cvId{{_id}}">
            <p>{{filename}}</p>
            {{!-- <p id="fileSelectedForFeedback">File: </p> --}}
            {{!-- <input type="hidden" id="fileIdSelectedForFeedback" value=""> --}}
            <div class="form-floating">
                {{!-- <textarea class="form-control pending-feedback-textarea" placeholder="Leave a comment here" id="" style="height: 100px">{{#compare comment.status '==' 'Pending'}}{{comment.content}}{{/compare}}</textarea> --}}
                <textarea class="form-control pending-feedback-textarea" placeholder="Leave a comment here" style="height: 100px"></textarea>
            </div>
        </div>
        {{/each}}
    </div>
    {{/compare}}
    {{#compare user_role '==' 'Requester'}}
    <div class = "feedback-header">
        Current Feedbacks:
    </div>
        {{#each feedbacks}}
        {{#compare status '==' 'Submitted'}}
        <div id = "feedbackContainer" class = "feedback-container">
            <div id ="feedback-details-div">
                <div class = "profile-pic">
                    <div id = "pic-inner{{@index}}" class = "pic-inner"></div>
                </div>
                <div id = "author-date-div">
                    <div class = "feedback-author" id = "feedback-author{{@index}}">
                        {{user_id.fullName}}
                    </div>
                    <div class = "feedback-date">
                        {{formatfeedbackdate submitDate}}
                    </div>
                </div>
            </div>
            <p><b>Filename: </b>{{contractVersion.filename}}</p>
            <div id = "feedbackDiv" class = "content">
                <b>Comment: </b>{{content}}
            </div>
        </div>
        {{/compare}}
        {{/each}}
    {{/compare}}
    {{!-- TODO: Fix Feedback History view for Requesters and Staff/Attorney--}}
    <div class = "feedback-header">
        Feedback History:
    </div>
        {{#each revisedfeedbacks}}
        {{#compare status '==' 'Revised'}}
        <div id = "feedbackContainer" class = "feedback-container">
            <div id ="feedback-details-div">
                <div class = "profile-pic">
                    <div id = "pic-inner{{@index}}" class = "pic-inner"></div>
                </div>
                <div id = "author-date-div">
                    <div class = "feedback-author" id = "feedback-author{{@index}}">
                        {{user_id.fullName}}
                    </div>
                    <div class = "feedback-date">
                        {{formatfeedbackdate submitDate}}
                    </div>
                </div>
            </div>
            <p><b>Filename: </b>{{contractVersion.filename}}</p>
            <div id = "feedbackDiv" class = "content">
                <b>Comment: </b>{{content}}
            </div>
        </div>
        {{/compare}}
        {{/each}}
    {{!-- <div class="feedback-header">
        Feedback History:
    </div>
    {{#each feedbacksets}}
    {{#each feedbacksets.feedbacks}}
    <div id="feedbackHistoryContainer" class="feedback-container">
        <div id="feedbackHistoryDetails">
            <div class="profile-pic">
                <div id = "pic-inner{{@index}}" class = "pic-inner"></div>
            </div>
            <div id = "author-date-div">
                <div class = "feedback-author" id = "feedback-author{{@index}}">
                    {{user_id.fullName}}
                </div>
                <div class = "feedback-date">
                    {{formatfeedbackdate submitDate}}
                </div>
            </div>
        </div>
        <div id="feedbackHistoryContentDiv" class="content">
            <span>{{content}}</span>
        </div>
    </div>
    {{/each}}
    {{/each}} --}}
</div>

{{!-- <script>
    const feedbackContainerDiv = document.getElementById("feedbackDiv");
    var feedbackHistoryDiv = document.getElementById("feedback-history");
    
    if (feedbackContainerDiv == null) {
       // alert(feedbackContainerDiv);
       var noFeedbackDiv = document.createElement("div");
       noFeedbackDiv.id = "noFeedbackText";
       noFeedbackDiv.textContent = "This file has no feedback yet."
       feedbackHistoryDiv.appendChild(noFeedbackDiv);
    }
    // get the initials of the feedback provider for the inner picture
    var feedbackCount = document.getElementsByClassName("pic-inner").length;
    
    for (i = 0; i < feedbackCount; i++) {
        var feedbackAuthorID = "#feedback-author" + i;
        var elementid = "pic-inner" + i;

        var feedbackAuthor = $(feedbackAuthorID).text();
        var matches = feedbackAuthor.match(/\b(\w)/g); // e.g. ['J','S','O','N']
        var acronym = matches.join(''); // output will be JSON
    
        document.getElementById(elementid).innerHTML = acronym;

    }
    
</script> --}}